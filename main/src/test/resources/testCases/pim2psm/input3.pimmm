<?xml version="1.0" encoding="ASCII"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pimMM="http://www.mddoai.com/mddoai/metamodel/pim">
  <pimMM:Pipeline name="framework-chatbot" jobStreams="/1 /2 /3 /4"/>
  <pimMM:ScriptJob name="build">
    <steps xsi:type="pimMM:Command">
      <program xsi:type="pimMM:StringLiteral" value="docker build -t ${IMAGE_TAG} ."/>
    </steps>
  </pimMM:ScriptJob>
  <pimMM:ScriptJob name="unitTest">
    <steps xsi:type="pimMM:Command">
      <program xsi:type="pimMM:StringLiteral" value="python3 test/run_unit_tests.py"/>
    </steps>
  </pimMM:ScriptJob>
  <pimMM:ScriptJob name="healthCheck">
    <steps xsi:type="pimMM:Command">
      <program xsi:type="pimMM:StringLiteral" value=" ./scripts/health_check.sh"/>
    </steps>
  </pimMM:ScriptJob>
  <pimMM:ScriptJob name="push">
    <steps xsi:type="pimMM:Command">
      <program xsi:type="pimMM:StringLiteral" value="docker login -u ${CI_REGISTRY_USER} -p ${CI_JOB_TOKEN} ${CI_REGISTRY}"/>
    </steps>
    <steps xsi:type="pimMM:Command">
      <program xsi:type="pimMM:StringLiteral" value="docker push ${IMAGE_TAG}"/>
    </steps>
  </pimMM:ScriptJob>
</xmi:XMI>
